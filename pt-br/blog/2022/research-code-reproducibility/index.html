<!DOCTYPE html> <html lang="pt-br"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta name="google-site-verification" content="g-X-aUUud1gtIVUgKEAx9T7VKpcQw1Ymd8aQ-hlIIY8"> <meta http-equiv="Permissions-Policy" content="interest-cohort=()"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> O problema da reproducibilidade de códigos de pesquisa | George C. de Araújo </title> <meta name="author" content="George C. de Araújo"> <meta name="description" content="Uma breve visão geral do problema da reproducibilidade de códigos de pesquisa."> <meta name="keywords" content="machine learning, artificial intelligence, deep learning, computer vision, natural language processing"> <meta property="og:site_name" content="George C. de Araújo"> <meta property="og:type" content="article"> <meta property="og:title" content="George C. de Araújo | O problema da reproducibilidade de códigos de pesquisa"> <meta property="og:url" content="https://george-gca.github.io/blog/2022/research-code-reproducibility/"> <meta property="og:description" content="Uma breve visão geral do problema da reproducibilidade de códigos de pesquisa."> <meta property="og:image" content="assets/img/profile_pic.png"> <meta property="og:image:alt" content="Foto de perfil"> <meta property="og:locale" content="pt-br"> <meta name="twitter:card" content="summary"> <meta name="twitter:title" content="O problema da reproducibilidade de códigos de pesquisa"> <meta name="twitter:description" content="Uma breve visão geral do problema da reproducibilidade de códigos de pesquisa."> <meta name="twitter:image" content="assets/img/profile_pic.png"> <script type="application/ld+json">
    {
        "author":
        {
            "@type": "Person",
            "name": "George C. de Araújo"
        },
        "url": "https://george-gca.github.io/blog/2022/research-code-reproducibility/",
        "@type": "BlogPosting",
        "description": "Uma breve visão geral do problema da reproducibilidade de códigos de pesquisa.",
        "headline": "O problema da reproducibilidade de códigos de pesquisa",
        
        "sameAs": ["https://orcid.org/0000-0002-7658-2786", "https://scholar.google.com/citations?user=kSVOrakAAAAJ", "http://lattes.cnpq.br/8522827733075951", "https://www.researchgate.net/profile/George-De-Araujo", "https://github.com/george-gca", "https://www.linkedin.com/in/georgecdearaujo", "https://dblp.org/pid/331/0630.html"],
        
        "name": "George C. de Araújo",
        "@context": "https://schema.org"
    }
  </script> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%F0%9F%91%A8%F0%9F%8F%BD%E2%80%8D%F0%9F%92%BB&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://george-gca.github.io/pt-br/blog/2022/research-code-reproducibility/"> <script src="/assets/js/theme.js?a5ca4084d3b81624bcfa01156dae2b8e"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>initTheme();</script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/pt-br/"> <span class="font-weight-bold">George</span> C. de Araújo </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/pt-br/">Bio </a> </li> <li class="nav-item "> <a class="nav-link" href="/pt-br/blog/">Blog </a> </li> <li class="nav-item "> <a class="nav-link" href="/pt-br/publications/">Publicações </a> </li> <li class="nav-item "> <a class="nav-link" href="/pt-br/repositories/">Repositórios </a> </li> <li class="nav-item "> <a class="nav-link" href="/pt-br/cv/">CV </a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/2022/research-code-reproducibility/"> EN-US</a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main" style="--stagger: 0;" data-animate> <div class="post"> <header class="post-header"> <h1 class="post-title">O problema da reproducibilidade de códigos de pesquisa</h1> <p class="post-meta" style="--stagger: 1;" data-animate=""> Criado em 21 de Outubro, 2022 </p> <p class="post-tags" style="--stagger: 2;" data-animate=""> <a href="/pt-br/blog/2022"> <i class="fa-solid fa-calendar fa-sm"></i> 2022 </a>   ·   <a href="/pt-br/blog/tag/research"> <i class="fa-solid fa-hashtag fa-sm"></i> research</a>   <a href="/pt-br/blog/tag/programming"> <i class="fa-solid fa-hashtag fa-sm"></i> programming</a>   <a href="/pt-br/blog/tag/reproducibility"> <i class="fa-solid fa-hashtag fa-sm"></i> reproducibility</a>   <a href="/pt-br/blog/tag/code"> <i class="fa-solid fa-hashtag fa-sm"></i> code</a>     ·   <a href="/pt-br/blog/category/research-code"> <i class="fa-solid fa-tag fa-sm"></i> research-code</a>   </p> </header> <article class="post-content"> <div id="markdown-content"> <p style="--stagger: 3;" data-animate="">Todo mundo no meio de pesquisa já passou por esse problema:</p> <blockquote style="--stagger: 4;" data-animate=""> <p style="--stagger: 5;" data-animate="">Você encontrou um artigo que deseja reproduzir. Você descobriu que o autor original (ou possivelmente outro pesquisador) publicou o código para executar esses experimentos. Você baixa o código, tenta executá-lo, mas não funciona. Falta trechos de código, bases de dados ou dependências. Talvez o código esteja um pouco desatualizado e você precise atualizá-lo para executar em sua máquina. Ou você precisa descobrir quais versões específicas das bibliotecas os autores usaram. Você passa horas tentando executar o código, mas sem sucesso. Você tenta entrar em contato com os autores, mas eles não respondem. Você tenta consertar o código sozinho, mas é muito complicado. Você desiste.</p> </blockquote> <p style="--stagger: 6;" data-animate="">Quem nunca ficou tão frustrado a ponto de desistir daquele código, talvez até daquele artigo? Nossa, conheço pessoas que desistiram de todo um campo de pesquisa porque não conseguiram reproduzir os resultados de um artigo. Várias vezes fui pego nesse tipo de situação, o que me fez questionar toda a parte de publicação de código. Depois de muito pensar, cheguei a uma solução parcial para esse problema.</p> <h2 id="o-principal-culpado" style="--stagger: 7;" data-animate="">O principal culpado</h2> <p style="--stagger: 8;" data-animate="">Na maioria das vezes que eu não consigo executar o código de outra pessoa, é por causa de uma coisa: <strong>as versões das dependências não são especificadas</strong>.</p> <p style="--stagger: 9;" data-animate="">Claro, muitas pessoas criam algo como um <code class="language-plaintext highlighter-rouge">requirements.txt</code>, mas geralmente não têm os números das versões. Mesmo quando possuem número de versão, geralmente não é o número exato da versão. Por exemplo, em vez de <code class="language-plaintext highlighter-rouge">numpy==1.19.5</code>, está <code class="language-plaintext highlighter-rouge">numpy&gt;=1.19.5</code>. Isso não é suficiente. Se você quiser reproduzir os resultados de outra pessoa, você precisa saber <strong>exatamente</strong> qual versão de cada dependência você precisa instalar. Caso contrário, você obterá resultados diferentes. Mesmo se você especificar o número exato da versão, ainda poderá obter resultados diferentes se os autores usarem uma versão diferente da linguagem, digamos, Python, ou algumas outras dependências de baixo nível, como cuda ou cuDNN.</p> <h2 id="docker-pra-salvar-o-dia" style="--stagger: 10;" data-animate="">Docker pra salvar o dia</h2> <p style="--stagger: 11;" data-animate="">É aí que entra o <a href="https://www.docker.com/" rel="external nofollow noopener" target="_blank">Docker</a>. O Docker é uma <a href="https://www.docker.com/resources/what-container/" rel="external nofollow noopener" target="_blank">tecnologia de conteinerização</a> que permite criar uma <a href="https://docs.docker.com/glossary/#image" rel="external nofollow noopener" target="_blank">imagem</a> que empacota todas as dependências necessárias para executar seu código. Você pode então executar seu código dentro de um <a href="https://docs.docker.com/glossary/#container" rel="external nofollow noopener" target="_blank">contêiner</a>, <strong>possivelmente</strong> obtendo os mesmos resultados que os autores. Fazendo uma alusão à programação orientada a objetos, <strong>imagem</strong> é a classe e <strong>contêiner</strong> é um objeto ou uma instância dessa classe. Você pode até compartilhar essa imagem com outras pessoas, para que elas também possam executar seu código. O Docker também suporta <a href="https://github.com/NVIDIA/nvidia-docker" rel="external nofollow noopener" target="_blank">executar código em GPUs</a>.</p> <p style="--stagger: 12;" data-animate="">Como exemplo, aqui está o <a href="https://github.com/george-gca/sr-pytorch-lightning" rel="external nofollow noopener" target="_blank">código base</a> que usei durante meu mestrado. Tentei ao máximo tornar o código reprodutível e extensível. Isso significa não apenas executar o modelo de IA, mas também poder criar seu próprio modelo e executá-lo com os mesmos dados e parâmetros de treinamento, para permitir comparações.</p> <p style="--stagger: 13;" data-animate="">Decidi dividir a lógica de lidar com o Docker (contido no <a href="https://github.com/george-gca/sr-pytorch-lightning/blob/main/Makefile" rel="external nofollow noopener" target="_blank">Makefile</a>) da execução do próprio código Python (contido no <a href="https://github.com/george-gca/sr-pytorch-lightning/blob/main/start_here.sh" rel="external nofollow noopener" target="_blank">start_here.sh</a>). A receita para criar a imagem do Docker está dentro do <a href="https://github.com/george-gca/sr-pytorch-lightning/blob/main/Dockerfile" rel="external nofollow noopener" target="_blank">Dockerfile</a>, e também disponibilizei um <a href="https://github.com/george-gca/sr-pytorch-lightning/blob/main/Dockerfile_fixed_versions" rel="external nofollow noopener" target="_blank">Dockerfile</a> com todas as versões das dependências definidas, como você pode ver no trecho de código abaixo. Tudo o que você pode precisar para executar o código é explicado no arquivo <a href="https://github.com/george-gca/sr-pytorch-lightning/blob/main/README.md" rel="external nofollow noopener" target="_blank">README</a>.</p> <div class="language-bash highlighter-rouge" style="--stagger: 14;" data-animate=""><div class="highlight"><pre class="highlight"><code>    <span class="nv">DEBIAN_FRONTEND</span><span class="o">=</span>noninteractive <span class="nv">$APT_INSTALL</span> <span class="se">\</span>
        <span class="nv">bc</span><span class="o">=</span>1.07.1-2 <span class="se">\</span>
        <span class="nv">curl</span><span class="o">=</span>7.58.0-2ubuntu3.18 <span class="se">\</span>
        <span class="nv">git</span><span class="o">=</span>1:2.17.1-1ubuntu0.11 <span class="se">\</span>
        libffi-dev<span class="o">=</span>3.2.1-8 <span class="se">\</span>
        <span class="nv">rsync</span><span class="o">=</span>3.1.2-2.1ubuntu1.4 <span class="se">\</span>
        <span class="nv">wget</span><span class="o">=</span>1.19.4-1ubuntu2.2 <span class="o">&amp;&amp;</span> <span class="se">\</span>

<span class="c"># ==================================================================</span>
<span class="c"># install python libraries via pip</span>
<span class="c"># ------------------------------------------------------------------</span>

    <span class="nv">$PIP_INSTALL</span> <span class="se">\</span>
        <span class="nv">pip</span><span class="o">==</span>22.0.4 <span class="se">\</span>
        <span class="nv">setuptools</span><span class="o">==</span>62.2.0 <span class="se">\</span>
        <span class="nv">wheel</span><span class="o">==</span>0.37.1 <span class="o">&amp;&amp;</span> <span class="se">\</span>
</code></pre></div></div> <p style="--stagger: 15;" data-animate="">Para garantir a reproducibilidade, apesar dos geradores de números aleatórios, usei a função <a href="https://pytorch-lightning.readthedocs.io/en/stable/api/pytorch_lightning.utilities.seed.html#pytorch_lightning.utilities.seed.seed_everything" rel="external nofollow noopener" target="_blank">seed_everything</a> do PyTorch Lightning. Essa função define a semente para geradores de números pseudo-aleatórios em: <code class="language-plaintext highlighter-rouge">pytorch</code>, <code class="language-plaintext highlighter-rouge">numpy</code>, <code class="language-plaintext highlighter-rouge">python.random</code>. Ele também define as seguintes variáveis de ambiente: <code class="language-plaintext highlighter-rouge">PL_GLOBAL_SEED</code> e <code class="language-plaintext highlighter-rouge">PL_SEED_WORKERS</code>.</p> <h2 id="o-docker-não-resolve-tudo" style="--stagger: 16;" data-animate="">O Docker não resolve tudo</h2> <p style="--stagger: 17;" data-animate="">Como você provavelmente está pensando, essa não é uma solução perfeita. Ainda existem problemas que podem surgir e que você precisa estar ciente, pois alguns deles estão fora do nosso controle.</p> <h3 id="alterações-nos-repositórios" style="--stagger: 18;" data-animate="">Alterações nos repositórios</h3> <p style="--stagger: 19;" data-animate="">Veja, por exemplo, essa parte do <a href="https://github.com/george-gca/sr-pytorch-lightning/blob/main/Dockerfile_fixed_versions" rel="external nofollow noopener" target="_blank">Dockerfile</a>:</p> <div class="language-bash highlighter-rouge" style="--stagger: 20;" data-animate=""><div class="highlight"><pre class="highlight"><code><span class="c"># temporary solution for bug</span>
<span class="c"># see https://forums.developer.nvidia.com/t/gpg-error-http-developer-download-nvidia-com-compute-cuda-repos-ubuntu1804-x86-64/212904/3</span>
apt-key adv <span class="nt">--fetch-keys</span> https://developer.download.nvidia.com/compute/machine-learning/repos/ubuntu1804/x86_64/3bf863cc.pub <span class="o">&amp;&amp;</span> <span class="se">\</span>
apt-key adv <span class="nt">--fetch-keys</span> https://developer.download.nvidia.com/compute/cuda/repos/ubuntu1804/x86_64/3bf863cc.pub <span class="o">&amp;&amp;</span> <span class="se">\</span>
</code></pre></div></div> <p style="--stagger: 21;" data-animate="">Esta é uma solução para um problema que encontrei no repositório da NVIDIA. Basicamente, eles estão (estavam?) em processo de rotação de suas chaves públicas GPG do repositório, que são usadas para assinar os pacotes. Isso estava causando um erro no comando <code class="language-plaintext highlighter-rouge">apt-get update</code> ao criar a imagem do Docker, e isso não estava acontecendo durante os meus experimentos, mas aconteceu quando eu decidi publicar o código.</p> <h3 id="dependências-de-dependências">Dependências de dependências</h3> <p>Às vezes, algumas versões específicas de dependências requerem versões específicas de suas próprias dependências. Isso aconteceu comigo ao especificar <code class="language-plaintext highlighter-rouge">tensorboard==2.9.0</code>, o que causou um erro ao construir a imagem do Docker. Para corrigir isso, eu precisava definir a versão apropriada do <code class="language-plaintext highlighter-rouge">protobuf</code> para instalar, mesmo meu código não usando o <code class="language-plaintext highlighter-rouge">protobuf</code> diretamente.</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">prettytable</span><span class="o">==</span>3.3.0 <span class="se">\</span>
<span class="c"># specify protobuf to avoid bug with tensorboard</span>
<span class="c"># https://developers.google.com/protocol-buffers/docs/news/2022-05-06#python-updates</span>
<span class="nv">protobuf</span><span class="o">==</span>3.20 <span class="se">\</span>
pytorch-lightning<span class="o">==</span>1.6.3 <span class="se">\</span>
<span class="nv">tensorboard</span><span class="o">==</span>2.9.0 <span class="se">\</span>
</code></pre></div></div> </div> </article> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h2 class="text-3xl font-semibold mb-4 mt-12"> Gostou de Ler este Artigo? </h2> <p class="mb-2">Aqui estão alguns artigos relacionados que você pode gostar de ler:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/pt-br/blog/2022/research-code-reproducibility/">The problem of research code reproducibility</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/pt-br/blog/2022/dual-language-al-folio/">Turning your al-folio into a dual-language website</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/pt-br/blog/2022/running-local-al-folio/">Running locally your own al-folio website</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/pt-br/blog/2022/localized-projects/">Creating localized Projects pages</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/pt-br/blog/2022/localized-blog/">Creating localized blog posts</a> </li> <div id="giscus_thread" style="max-width: 1000px; margin: 0 auto;"> <script>let giscusTheme=determineComputedTheme(),giscusAttributes={src:"https://giscus.app/client.js","data-repo":"george-gca/george-gca.github.io","data-repo-id":"R_kgDOI66tbw","data-category":"Announcements","data-category-id":"DIC_kwDOI66tb84CUDq6","data-mapping":"title","data-strict":"1","data-reactions-enabled":"1","data-emit-metadata":"0","data-input-position":"bottom","data-theme":giscusTheme,"data-lang":"pt",crossorigin:"anonymous",async:""},giscusScript=document.createElement("script");Object.entries(giscusAttributes).forEach(([t,e])=>giscusScript.setAttribute(t,e)),document.getElementById("giscus_thread").appendChild(giscusScript);</script> <noscript>Please enable JavaScript to view the <a href="http://giscus.app/?ref_noscript" rel="external nofollow noopener" target="_blank">comments powered by giscus.</a> </noscript> </div> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2024 George C. de Araújo. Desenvolvido em <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> com o tema <a href="https://github.com/george-gca/multi-language-al-folio" rel="external nofollow noopener" target="_blank">multi-language-al-folio</a>. Hospedado por <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?ec82345cb41d6fd19bf9dfe5403e38e4"></script> <script defer src="/assets/js/common.js?0a3802ad0537cb758572d8fdeb0b31a9"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.min.js" integrity="sha256-rjmgmaB99riUNcdlrDtcAiwtLIojSxNyUFdl+Qh+rB4=" crossorigin="anonymous"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script async src="https://www.googletagmanager.com/gtag/js?id=G-J7KHS011G7"></script> <script>function gtag(){window.dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-J7KHS011G7");</script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>